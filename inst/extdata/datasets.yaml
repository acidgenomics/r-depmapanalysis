# DepMap dataset URLs
#
# @note Updated 2021-07-07.
#
# @section Combination of Broad and Sanger scoring data:
#
# Combined Achilles and Sanger SCORE Chronos data using Harmonia. This batch
# correction pipeline is described in:
# https://www.biorxiv.org/content/10.1101/2020.05.22.110247v3.
#
# @section Chronos vs. CERES scoring:
#
# Chronos was added as the recommended scoring method over CERES in the 2021
# Q2 update.
#
# Blog post describing difference:
# https://cancerdatascience.org/blog/posts/ceres-chronos/
#
# Pre-print manuscript:
# https://www.biorxiv.org/content/10.1101/2021.02.25.432728v1.abstract
#
# @section Descriptions of file downloads:
#
# Harmonia data (Broad Achilles and Sanger Project Score combined);
# post-Chronos scoring (current preferred method):
#
# - `crispr_common_essentials_chronos.csv`:
#       List of genes identified as dependencies in all lines, one per line.
# - `crispr_gene_dependency_chronos.csv`:
#       Probability that knocking out the gene has a real depletion effect
#       using 'CRISPR_gene_effect_Chronos'.
#       - Columns: genes in the format "HUGO (Entrez)".
#       - Rows: cell lines (Broad IDs).
# - `crispr_gene_effect_chronos.csv`:
#       Combined Achilles and Sanger SCORE Chronos data using Harmonia.
#       - Columns: genes in the format "HUGO (Entrez)".
#       - Rows: cell lines (Broad IDs).
#
# Harmonia data (Broad Achilles and Sanger Project Score combined);
# post-CERES scoring (deprecated in favor of Chronos):
#
# - `crispr_common_essentials.csv`:
#       List of genes identified as dependencies in all lines, one per line.
# - `crispr_gene_dependency.csv`:
#       Probability that knocking out the gene has a real depletion effect
#       using 'CRISPR_gene_effect'.
#       - Columns: genes in the format "HUGO (Entrez)".
#       - Rows: cell lines (Broad IDs).
# - `crispr_gene_effect.csv`:
#       Combined Achilles and Sanger SCORE Chronos data using Harmonia.
#       - Columns: genes in the format "HUGO (Entrez)".
#       - Rows: cell lines (Broad IDs).
#
# Achilles data (deprecated in favor of Harmonia);
# post-Chronos scoring:
#
# - `achilles_common_essentials_chronos.csv`:
#       List of genes identified as pan-essentials using Chronos.
# - `achilles_gene_dependency_chronos.csv`:
#       Probability that knocking out the gene has a real depletion effect
#       using 'gene_effect_Chronos'.
#       - Columns: genes in the format "HUGO (Entrez)".
#       - Rows: cell lines (Broad IDs).
# - `achilles_gene_effect_chronos.csv`:
#       Chronos data, copy number corrected.
#       - Columns: genes in the format "HUGO (Entrez)".
#       - Rows: cell lines (Broad IDs).
#
# Achilles data (deprecated in favor of Harmonia);
# post-CERES scoring (deprecated in favor of Chronos):
#
# - `achilles_common_essentials.csv`:
#       List of genes identified as dependencies in all lines, one per line.
# - `achilles_gene_dependency.csv`:
#       Probability that knocking out the gene has a real depletion effect
#       using 'gene_effect'.
#       - Columns: genes in the format "HUGO (Entrez)".
#       - Rows: cell lines (Broad IDs).
# - `achilles_gene_effect.csv`:
#       CERES data with principle components strongly related to known batch
#       effects removed, then shifted and scaled per cell line so the median
#       nonessential KO effect is 0 and the median essential KO effect is -1.
#       - Columns: genes in the format "HUGO (Entrez)".
#       - Rows: cell lines (Broad IDs).
#
# Pre-CERES (and Chronos) scoring control files:
#
# - `common_essentials.csv`:
#       List of genes used as positive controls, intersection of
#       Biomen (2014) and Hart (2015) essentials in the format "HUGO (Entrez)".
#       Each entry is separated by a newline. The scores of these genes are
#       used as the dependent distribution for inferring dependency
#       probability.
# - `nonessentials.csv`:
#       List of genes used as negative controls (Hart (2014) nonessentials)
#       in the format "HUGO (Entrez)". Each entry is separated by a newline.
#
# RNAi screening with DEMETER2 scoring:
#
# - `d2_combined_gene_dep_scores.csv`:
#       Source: Broad Institute, Novartis, Marcotte et al.
#       - 17309 Genes
#       - 712 Cell Lines
#       - 31 Primary Diseases
#       - 31 Lineages
#
# CCLE files:
#
# - `ccle_expression.csv`:
#       RNAseq TPM gene expression data for just protein coding genes using
#       RSEM. Log2 transformed, using a pseudo-count of 1.
#       - Rows: cell lines (Broad IDs).
#       - Columns: genes (HGNC symbol and Entrez ID).
# - `ccle_gene_cn.csv`:
#       Gene level copy number data, log2 transformed with a pseudo count
#       of 1. This is generated by mapping genes onto the segment level calls.
#       - Rows: cell lines (Broad IDs).
#       - Columns: genes (HGNC symbol and Entrez ID).
# - `ccle_mutations.csv`:
#       MAF of gene mutations. For all columns with AC, the allelic ratio is
#       presented as [ALTERNATE:REFERENCE].
#       Columns:
#       - CGA_WES_AC:
#             the allelic ratio for this variant in all our WES/WGS(exon only)
#             using a cell line adapted version of the 2019 CGA pipeline that
#             includes germline filtering.
#       - SangerWES_AC:
#             in Sanger WES (called by sanger) (legacy).
#       - SangerRecalibWES_AC:
#             in Sanger WES after realignment at Broad (legacy).
#       - RNAseq_AC:
#             in Broad RNAseq data from the CCLE2 project (legacy).
#       - HC_AC:
#             in Broad Hybrid capture data from the CCLE2 project (legacy).
#       - RD_AC: in Broad Raindance data from the CCLE2 project (legacy).
#       - legacy_wgs_exon_only:
#             in Broad WGS data from the CCLE2 project (legacy).
#       - isTCGAhotspot:
#             is this mutation commonly found in TCGA.
#       - TCGAhsCnt:
#             number of times this mutation is observed in TCGA.
#       - isCOSMIChotspot:
#             is this mutation commonly found in COSMIC.
#       - COSMIChsCnt:
#             number of samples in COSMIC with this mutation.
#       - ExAC_AF:
#             the allelic frequency in the Exome Aggregation
#             Consortium (ExAC).
#       Descriptions of the remaining columns in the MAF can be found here:
#       https://docs.gdc.cancer.gov/Data/File_Formats/MAF_Format/
#
# Other files:
#
# - `readme.txt`:
#       Description of all files contained in this release.
# - `sample_info.csv`:
#       Cell line information definitions:
#       - [1] "DepMap_ID"
#                 Static primary key assigned by DepMap to each cell line.
#       - [2] "cell_line_name"
#       - [3] "stripped_cell_line_name"
#                  Cell line name with alphanumeric characters only.
#       - [4] "CCLE_Name"
#                  Previous naming system that used the stripped cell line name
#                  followed by the lineage; no longer assigned to new cell
#                  lines.
#       - [5] "alias"
#                  Additional cell line identifiers (not a comprehensive list).
#       - [6] "COSMICID"
#                  Cell line ID used in Cosmic cancer database
#       - [7] "sex"
#                  Sex of tissue donor if known.
#       - [8] "source"
#                  Source of cell line vial used by DepMap.
#       - [9] "Achilles_n_replicates"
#                 Number of replicates used in Achilles CRISPR screen
#                 passing QC.
#      -  [10] "cell_line_NNMD"
#                 Difference in the means of positive and negative controls
#                 normalized by the standard deviation of the negative control
#                 distribution.
#      -  [11] "culture_type"
#                 Growth pattern of cell line (Adherent, Suspension, Mixed
#                 adherent and suspension, 3D, or Adherent (requires
#                 laminin coating)).
#      -  [12] "culture_medium"
#                 Medium used to grow cell line.
#      -  [13] "cas9_activity"
#                 Percentage of cells remaining GFP positive on days 12-14 of
#                 cas9 activity assay as measured by FACS.
#      -  [14] "RRID"
#                 Cellosaurus research resource identifier.
#      -  [15] "WTSI_Master_Cell_ID"
#      -  [16] "sample_collection_site"
#                 Tissue collection site.
#      -  [17] "primary_or_metastasis"
#                 Indicates whether tissue sample is from primary or
#                 metastatic site.
#      -  [18] "primary_disease"
#                 General cancer lineage category.
#      -  [19] "Subtype"
#                 Subtype of disease; specific disease name.
#      -  [20] "age"
#                 If known, age of tissue donor at time of sample collection.
#      -  [21] "Sanger_Model_ID"
#                 Sanger Institute Cell Model Passport ID.
#      -  [22] "depmap_public_comments"
#      -  [23] "lineage"
#      -  [24] "lineage_subtype"
#      -  [25] "lineage_sub_subtype"
#      -  [26] "lineage_molecular_subtype"
#                  Cancer type classifications in a standardized form.
#
# @seealso
# - https://depmap.org/portal/download/
---

depmap_public_21q2:
    metadata:
        date: "2021-05"
        readme:
            filename: "readme.txt"
            url: "https://ndownloader.figshare.com/files/27902373"
        sample_info:
            filename: "sample_info.csv"
            url: "https://ndownloader.figshare.com/files/27902376"
    screen:
        library_type: "crispr"
        transpose_assays: true
        controls:
            common_essentials:
                filename: "common_essentials.csv"
                url: "https://ndownloader.figshare.com/files/27902160"
            nonessentials:
                filename: "nonessentials.csv"
                url: "https://ndownloader.figshare.com/files/27902370"
        defaults:
            project: "combined"
            scoring_method: "chronos"
        project:
            - combined:  # achilles+score
                scoring_method:
                    - chronos:
                        common_essentials:
                            filename: "crispr_common_essentials_chronos.csv"
                            url: "https://ndownloader.figshare.com/files/27902166"
                        gene_dependency:
                            filename: "crispr_gene_dependency_chronos.csv"
                            url: "https://ndownloader.figshare.com/files/27902175"
                        gene_effect:
                            filename: "crispr_gene_effect_chronos.csv"
                            url: "https://ndownloader.figshare.com/files/27902229"
                    - ceres:
                        common_essentials:
                            filename: "crispr_common_essentials.csv"
                            url: "https://ndownloader.figshare.com/files/27902163"
                        gene_dependency:
                            filename: "crispr_gene_dependency.csv"
                            url: "https://ndownloader.figshare.com/files/27902169"
                        gene_effect:
                            filename: "crispr_gene_effect.csv"
                            url: "https://ndownloader.figshare.com/files/27902226"
            - achilles:
                scoring_method:
                    - chronos:
                        "common_essentials":
                            filename: "achilles_common_essentials_chronos.csv"
                            url: "https://ndownloader.figshare.com/files/27902031"
                        "gene_dependency":
                            filename: "achilles_gene_dependency_chronos.csv"
                            url: "https://ndownloader.figshare.com/files/27902049"
                        "gene_effect":
                            filename: "achilles_gene_effect_chronos.csv"
                            url: "https://ndownloader.figshare.com/files/27902043"
                    - ceres:
                        "common_essentials":
                            filename: "achilles_common_essentials.csv"
                            url: "https://ndownloader.figshare.com/files/27902028"
                        "gene_dependency":
                            filename: "achilles_gene_dependency.csv"
                            url: "https://ndownloader.figshare.com/files/27902040"
                        "gene_effect":
                            filename: "achilles_gene_effect.csv"
                            url: "https://ndownloader.figshare.com/files/27902046"
    ccle:
        copy_number:
            filename: "ccle_gene_cn.csv"
            url: "https://ndownloader.figshare.com/files/27902124"
        expression:
            filename: "ccle_expression.csv"
            url: "https://ndownloader.figshare.com/files/27902091"
        fusions:
            filename: "ccle_fusions.csv"
            url: "https://ndownloader.figshare.com/files/27902109"
        fusions_unfiltered:
            filename: "ccle_fusions_unfiltered.csv"
            url: "https://ndownloader.figshare.com/files/27902115"
        mutations:
            filename: "ccle_mutations.csv"
            url: "https://ndownloader.figshare.com/files/27902118"

depmap_public_21q1:
    metadata:
        date: "2021-02"
        readme:
            filename: "readme.txt"
            url: "https://ndownloader.figshare.com/files/26261566"
        sample_info:
            filename: "sample_info.csv"
            url: "https://ndownloader.figshare.com/files/26261569"
    screen:
        controls:
            common_essentials:
                filename: "common_essentials.csv"
                url: "https://ndownloader.figshare.com/files/26261545"
            nonessentials:
                filename: "nonessentials.csv"
                url: "https://ndownloader.figshare.com/files/26261557"
        defaults:
            project: "combined"
            scoring_method: "chronos"
        project:
            - combined:
                scoring_method:
                    - ceres:
                        common_essentials:
                            filename: "crispr_common_essentials.csv"
                            url: "https://ndownloader.figshare.com/files/26261551"
                        gene_dependency:
                            filename: "crispr_gene_dependency.csv"
                            url: "https://ndownloader.figshare.com/files/26261554"
                        gene_effect:
                            filename: "crispr_gene_effect.csv"
                            url: "https://ndownloader.figshare.com/files/26261563"
            - achilles:
                scoring_method:
                    - ceres:
                        common_essentials:
                            filename: "achilles_common_essentials.csv"
                            url: "https://ndownloader.figshare.com/files/26261275"
                        gene_dependency:
                            filename: "achilles_gene_dependency.csv"
                            url: "https://ndownloader.figshare.com/files/26261290"
                        gene_effect:
                            filename: "achilles_gene_effect.csv"
                            url: "https://ndownloader.figshare.com/files/26261293"
    ccle:
        copy_number:
            filename: "ccle_gene_cn.csv"
            url: "https://ndownloader.figshare.com/files/26261524"
        expression:
            filename: "ccle_expression.csv"
            url: "https://ndownloader.figshare.com/files/26261476"
        fusions:
            filename: "ccle_fusions.csv"
            url: "https://ndownloader.figshare.com/files/26261512"
        fusions_unfiltered:
            filename: "ccle_fusions_unfiltered.csv"
            url: "https://ndownloader.figshare.com/files/26261515"
        mutations:
            filename: "ccle_mutations.csv"
            url: "https://ndownloader.figshare.com/files/26261527"

depmap_public_20q4v2:
    metadata:
        date: "2020-12"
        readme:
            filename: "readme.txt"
            url: "https://ndownloader.figshare.com/files/25797005"
        sample_info:
            filename: "sample_info.csv"
            url: "https://ndownloader.figshare.com/files/25494443"
    ccle:
        copy_number:
            filename: "ccle_gene_cn.csv"
            url: "https://ndownloader.figshare.com/files/25770017"
        expression:
            filename: "ccle_expression.csv"
            url: "https://ndownloader.figshare.com/files/25797011"
        fusions:
            filename: "ccle_fusions.csv"
            url: "https://ndownloader.figshare.com/files/25494407"
        fusions_unfiltered:
            filename: "ccle_fusions_unfiltered.csv"
            url: "https://ndownloader.figshare.com/files/25494410"
        mutations:
            filename: "ccle_mutations.csv"
            url: "https://ndownloader.figshare.com/files/25494419"
    screen:
        library_type: "crispr"
        transpose_assays: true
        controls:
            common_essentials:
                filename: "common_essentials.csv"
                url: "https://ndownloader.figshare.com/files/25494434"
            nonessentials:
                filename: "nonessentials.csv"
                url: "https://ndownloader.figshare.com/files/25494437"
        defaults:
            project: "achilles"
            scoring_method: "ceres"
        project:
            - achilles:
                scoring_method:
                    - ceres:
                        common_essentials:
                            filename: "achilles_common_essentials.csv"
                            url: "https://ndownloader.figshare.com/files/25770002"
                        gene_dependency:
                            filename: "achilles_gene_dependency.csv"
                            url: "https://ndownloader.figshare.com/files/25770032"
                        gene_effect:
                            filename: "achilles_gene_effect.csv"
                            url: "https://ndownloader.figshare.com/files/25770029"

depmap_public_20q3:
    metadata:
        date: "2020-09"
        readme:
            filename: "readme.txt"
            url: "https://ndownloader.figshare.com/files/24613391"
        sample_info:
            filename: "sample_info.csv"
            url: "https://ndownloader.figshare.com/files/24613394"
    screen:
        library_type: "crispr"
        transpose_assays: true
        controls:
            common_essentials:
                filename: "common_essentials.csv"
                url: "https://ndownloader.figshare.com/files/24613385"
            nonessentials:
                filename: "nonessentials.csv"
                url: "https://ndownloader.figshare.com/files/24613388"
        defaults:
            project: "achilles"
            scoring_method: "ceres"
        project:
            - achilles:
                scoring_method:
                    - ceres:
                        common_essentials:
                            filename: "achilles_common_essentials.csv"
                            url: "https://ndownloader.figshare.com/files/24613283"
                        gene_dependency:
                            filename: "achilles_gene_dependency.csv"
                            url: "https://ndownloader.figshare.com/files/24613298"
                        gene_effect:
                            filename: "achilles_gene_effect.csv"
                            url: "https://ndownloader.figshare.com/files/24613292"
    ccle:
        copy_number:
            filename: "ccle_gene_cn.csv"
            url: "https://ndownloader.figshare.com/files/24613352"
        expression:
            filename: "ccle_expression.csv"
            url: "https://ndownloader.figshare.com/files/24613325"
        fusions:
            filename: "ccle_fusions.csv"
            url: "https://ndownloader.figshare.com/files/24613343"
        fusions_unfiltered:
            filename: "ccle_fusions_unfiltered.csv"
            url: "https://ndownloader.figshare.com/files/24613346"
        mutations:
            filename: "ccle_mutations.csv"
            url: "https://ndownloader.figshare.com/files/24613355"

depmap_public_20q2:
    metadata:
        date: "2020-05"
        readme:
            filename: "readme_v2.txt"
            url: "https://ndownloader.figshare.com/files/22897970"
        sample_info:
            filename: "sample_info.csv"
            url: "https://ndownloader.figshare.com/files/22629137"
    screen:
        library_type: "crispr"
        transpose_assays: true
        controls:
            common_essentials:
                filename: "common_essentials.csv"
                url: "https://ndownloader.figshare.com/files/22629128"
            nonessentials:
                filename: "nonessentials.csv"
                url: "https://ndownloader.figshare.com/files/22629131"
        defaults:
            project: "achilles"
            scoring_method: "ceres"
        project:
            - achilles:
                scoring_method:
                    - ceres:
                        common_essentials:
                            filename: "achilles_common_essentials.csv"
                            url: "https://ndownloader.figshare.com/files/22629059"
                        gene_dependency:
                            filename: "achilles_gene_dependency.csv"
                            url: "https://ndownloader.figshare.com/files/22629071"
                        gene_effect:
                            filename: "achilles_gene_effect.csv"
                            url: "https://ndownloader.figshare.com/files/22629068"
    ccle:
        copy_number:
            filename: "ccle_gene_cn.csv"
            url: "https://ndownloader.figshare.com/files/22629107"
        expression:
            filename: "ccle_expression_v2.csv"
            url: "https://ndownloader.figshare.com/files/22897976"
        fusions:
            filename: "ccle_fusions.csv"
            url: "https://ndownloader.figshare.com/files/22629101"
        fusions_unfiltered:
            filename: "ccle_fusions_unfiltered.csv"
            url: "https://ndownloader.figshare.com/files/22629104"
        mutations:
            filename: "ccle_mutations.csv"
            url: "https://ndownloader.figshare.com/files/22629110"

depmap_public_20q1:
    metadata:
        date: "2020-02"
        readme:
            filename: "readme_v2.txt"
            url: "https://ndownloader.figshare.com/files/22543694"
        sample_info:
            filename: "sample_info_v2.csv"
            url: "https://ndownloader.figshare.com/files/21522000"
    screen:
        library_type: "crispr"
        transpose_assays: true
        controls:
            common_essentials:
                filename: "common_essentials.csv"
                url: "https://ndownloader.figshare.com/files/21521991"
            nonessentials:
                filename: "nonessentials.csv"
                url: "https://ndownloader.figshare.com/files/21521994"
        defaults:
            project: "achilles"
            scoring_method: "ceres"
        project:
            - achilles:
                scoring_method:
                    - ceres:
                        common_essentials:
                            filename: "achilles_common_essentials.csv"
                            url: "https://ndownloader.figshare.com/files/21521865"
                        gene_dependency:
                            filename: "achilles_gene_dependency_v2.csv"
                            url: "https://ndownloader.figshare.com/files/22543826"
                        gene_effect:
                            filename: "achilles_gene_effect_v2.csv"
                            url: "https://ndownloader.figshare.com/files/22543691"
    ccle:
        copy_number:
            filename: "ccle_gene_cn.csv"
            url: "https://ndownloader.figshare.com/files/21521964"
        expression:
            filename: "ccle_expression.csv"
            url: "https://ndownloader.figshare.com/files/21521940"
        fusions:
            filename: "ccle_fusions.csv"
            url: "https://ndownloader.figshare.com/files/21521946"
        fusions_unfiltered:
            filename: "ccle_fusions_unfiltered.csv"
            url: "https://ndownloader.figshare.com/files/21521943"
        mutations:
            filename: "ccle_mutations.csv"
            url: "https://ndownloader.figshare.com/files/21521967"

demeter2_data_v6:
    metadata:
        date: "2020-04"
        readme:
            filename: "readme.txt"
            url: "https://ndownloader.figshare.com/files/13515380"
        sample_info:
            filename: "sample_info.csv"
            url: "https://ndownloader.figshare.com/files/11489717"
    screen:
        library_type: "rnai"
        transpose_assays: false
        controls:
            common_essentials:
                filename: "hart-pos-controls.csv"
                url: "https://ndownloader.figshare.com/files/11489711"
            nonessentials:
                filename: "hart-neg-controls.csv"
                url: "https://ndownloader.figshare.com/files/11489708"
        defaults:
            project: "combined"
            scoring_method: "demeter2"
        project:
            - combined:  # achilles+drive+marcotte
                scoring_method:
                    - demeter2:
                        gene_dependency:
                            filename: "d2_combined_gene_dep_scores.csv"
                            url: "https://ndownloader.figshare.com/files/13515395"
            - achilles:
                scoring_method:
                    - demeter2:
                        gene_dependency:
                            filename: "d2_achilles_gene_dep_scores.csv"
                            url: "https://ndownloader.figshare.com/files/11489669"
            - drive:
                scoring_method:
                    - demeter2:
                        gene_dependency:
                            filename: "d2_drive_gene_dep_scores.csv"
                            url: "https://ndownloader.figshare.com/files/11489693"

sanger_project_score_2021_05:
    metadata:
        date: "2021-05"
        readme:
            filename: "readme.txt"
            url: "https://ndownloader.figshare.com/files/27676626"
    screen:
        library_type: "crispr"
        transpose_assays: true
        defaults:
            project: "score"
            scoring_method: "chronos"
        project:
            - score:
                scoring_method:
                    - chronos:
                        common_essentials:
                            filename: "common_essentials.csv"
                            url: "https://ndownloader.figshare.com/files/27676611"
                        gene_dependency:
                            filename: "gene_dependency.csv"
                            url: "https://ndownloader.figshare.com/files/27676620"
                        gene_effect:
                            filename: "gene_effect.csv"
                            url: "https://ndownloader.figshare.com/files/27676629"

sanger_project_score_2019_08:
    metadata:
        date: "2019-08"
        readme:
            filename: "readme.txt"
            url: "https://ndownloader.figshare.com/files/16623944"
    screen:
        library_type: "crispr"
        transpose_assays: true
        controls:
            essential_genes:
                filename: "essential_genes.txt"
                url: "https://ndownloader.figshare.com/files/16623887"
            nonessential_genes:
                filename: "nonessential_genes.csv"
                url: "https://ndownloader.figshare.com/files/16623890"
        defaults:
            project: "score"
            scoring_method: "ceres"
        project:
            - score:
                scoring_method:
                    - ceres:
                        common_essentials:
                            filename: "pan_dependent_genes.txt"
                            url: "https://ndownloader.figshare.com/files/16623899"
                        gene_dependency:
                            filename: "gene_dependency.csv"
                            url: "https://ndownloader.figshare.com/files/16623884"
                        gene_effect:
                            filename: "gene_effect.csv"
                            url: "https://ndownloader.figshare.com/files/16623881"
